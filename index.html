<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Planejamento de Produção</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            color: #333;
            padding: 20px;
        }

        .header {
            margin-bottom: 20px;
        }

        h1 {
            font-size: 24px;
            font-weight: 600;
            color: #2E7D32;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .card-header {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .card-value {
            font-size: 32px;
            font-weight: 600;
            color: #2E7D32;
        }

        .card-value.azul {
            color: #1976D2;
        }

        .card-desc {
            font-size: 13px;
            color: #666;
            margin-top: 5px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .produto-card {
            background: white;
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .produto-card h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #1976D2;
        }

        .metric {
            margin-bottom: 12px;
        }

        .metric-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .metric-value {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .input-field {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .input-field:focus {
            outline: none;
            border-color: #1976D2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
        }

        .input-small {
            width: 80px;
            padding: 6px;
            font-size: 14px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .maquina-card {
            background: white;
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .maquina-card h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #2E7D32;
        }

        .barra {
            background: #e0e0e0;
            height: 25px;
            margin-top: 10px;
            position: relative;
        }

        .barra-fill {
            background: #2E7D32;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-size: 11px;
            font-weight: 600;
            transition: width 0.3s;
        }

        .barra-fill.azul {
            background: #1976D2;
        }

        .barra-info {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .problema-box {
            background: white;
            padding: 20px;
            border: 1px solid #e0e0e0;
            margin-bottom: 20px;
        }

        .problema-box h2 {
            font-size: 16px;
            margin-bottom: 12px;
            color: #2E7D32;
        }

        .problema-box p {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        th {
            text-align: left;
            padding: 8px;
            border-bottom: 1px solid #e0e0e0;
            font-weight: 600;
            color: #666;
            font-size: 11px;
            text-transform: uppercase;
        }

        td {
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .input-cell {
            width: 60px;
            padding: 4px;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-align: center;
            font-size: 13px;
        }

        .input-cell:focus {
            outline: none;
            border-color: #1976D2;
        }

        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .grid-3 {
                grid-template-columns: 1fr;
            }
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Planejamento de Produção</h1>
        <p class="subtitle">Dashboard de Otimização - Farmácia</p>
    </div>

    <div class="problema-box">
        <h2>O Problema</h2>
        <p>
            Produzir três medicamentos (Paracetamol, Ibuprofeno, Vitamina C) utilizando duas máquinas 
            (Misturador e Reator), atendendo a demanda mínima e respeitando a capacidade das máquinas, 
            minimizando o custo total de produção.
        </p>
    </div>

    <div class="dashboard">
        <div class="card">
            <div class="card-header">Custo Total</div>
            <div class="card-value" id="custoTotal">R$ 12.750</div>
            <div class="card-desc">Solução ótima encontrada</div>
        </div>
        <div class="card">
            <div class="card-header">Total de Lotes</div>
            <div class="card-value azul" id="totalLotes">400</div>
            <div class="card-desc" id="descLotes">150 + 100 + 150 lotes</div>
        </div>
    </div>

    <div class="grid-3">
        <div class="produto-card">
            <h3>Paracetamol (P1)</h3>
            <div class="metric">
                <div class="metric-label">Lotes a Produzir</div>
                <input type="number" class="input-field" id="lotesP1" value="150" min="0" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Custo Individual</div>
                <div class="metric-value" id="custoP1">R$ 5.250</div>
            </div>
            <div class="metric">
                <div class="metric-label">Custo por Lote</div>
                <input type="number" class="input-field" id="custoLoteP1" value="35" min="0" step="0.01" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Demanda Mínima</div>
                <input type="number" class="input-field" id="demandaP1" value="150" min="0" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Status</div>
                <div class="metric-value" id="statusP1" style="color: #4CAF50; font-size: 14px;">✓ Atende demanda</div>
            </div>
        </div>

        <div class="produto-card">
            <h3>Ibuprofeno (P2)</h3>
            <div class="metric">
                <div class="metric-label">Lotes a Produzir</div>
                <input type="number" class="input-field" id="lotesP2" value="100" min="0" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Custo Individual</div>
                <div class="metric-value" id="custoP2">R$ 4.500</div>
            </div>
            <div class="metric">
                <div class="metric-label">Custo por Lote</div>
                <input type="number" class="input-field" id="custoLoteP2" value="45" min="0" step="0.01" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Demanda Mínima</div>
                <input type="number" class="input-field" id="demandaP2" value="100" min="0" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Status</div>
                <div class="metric-value" id="statusP2" style="color: #4CAF50; font-size: 14px;">✓ Atende demanda</div>
            </div>
        </div>

        <div class="produto-card">
            <h3>Vitamina C (P3)</h3>
            <div class="metric">
                <div class="metric-label">Lotes a Produzir</div>
                <input type="number" class="input-field" id="lotesP3" value="150" min="0" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Custo Individual</div>
                <div class="metric-value" id="custoP3">R$ 3.000</div>
            </div>
            <div class="metric">
                <div class="metric-label">Custo por Lote</div>
                <input type="number" class="input-field" id="custoLoteP3" value="20" min="0" step="0.01" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Demanda Mínima</div>
                <input type="number" class="input-field" id="demandaP3" value="150" min="0" onchange="calcular()">
            </div>
            <div class="metric">
                <div class="metric-label">Status</div>
                <div class="metric-value" id="statusP3" style="color: #4CAF50; font-size: 14px;">✓ Atende demanda</div>
            </div>
        </div>
    </div>

    <div class="grid-2">
        <div class="maquina-card">
            <h3>Misturador</h3>
            <div class="metric">
                <div class="metric-label">Capacidade Total (horas)</div>
                <input type="number" class="input-field" id="capMisturador" value="1200" min="0" onchange="calcular()">
            </div>
            <div class="barra-info">
                <span id="usoMisturador">825 / 1200 horas</span>
                <span style="font-weight: 600;" id="percMisturador">68,75%</span>
            </div>
            <div class="barra">
                <div class="barra-fill" id="barraMisturador" style="width: 68.75%;">68,75%</div>
            </div>
            <div style="font-size: 12px; color: #666; margin-top: 8px;" id="restoMisturador">
                Capacidade restante: 375 horas
            </div>
        </div>

        <div class="maquina-card">
            <h3>Reator</h3>
            <div class="metric">
                <div class="metric-label">Capacidade Total (horas)</div>
                <input type="number" class="input-field" id="capReator" value="1000" min="0" onchange="calcular()">
            </div>
            <div class="barra-info">
                <span id="usoReator">975 / 1000 horas</span>
                <span style="font-weight: 600; color: #FF9800;" id="percReator">97,5%</span>
            </div>
            <div class="barra">
                <div class="barra-fill azul" id="barraReator" style="width: 97.5%;">97,5%</div>
            </div>
            <div style="font-size: 12px; color: #FF9800; margin-top: 8px;" id="restoReator">
                ⚠ Capacidade quase esgotada: 25 horas restantes
            </div>
        </div>
    </div>

    <div class="grid-2">
        <div class="card">
            <div class="card-header">Tempos de Processamento (horas/lote)</div>
            <table>
                <thead>
                    <tr>
                        <th>Máquina</th>
                        <th>P1</th>
                        <th>P2</th>
                        <th>P3</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Misturador</td>
                        <td><input type="number" class="input-cell" id="tempoMistP1" value="2.0" step="0.1" min="0" onchange="calcular()"></td>
                        <td><input type="number" class="input-cell" id="tempoMistP2" value="3.0" step="0.1" min="0" onchange="calcular()"></td>
                        <td><input type="number" class="input-cell" id="tempoMistP3" value="1.5" step="0.1" min="0" onchange="calcular()"></td>
                    </tr>
                    <tr>
                        <td>Reator</td>
                        <td><input type="number" class="input-cell" id="tempoReatP1" value="2.5" step="0.1" min="0" onchange="calcular()"></td>
                        <td><input type="number" class="input-cell" id="tempoReatP2" value="3.0" step="0.1" min="0" onchange="calcular()"></td>
                        <td><input type="number" class="input-cell" id="tempoReatP3" value="2.0" step="0.1" min="0" onchange="calcular()"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="card">
            <div class="card-header">Capacidades</div>
            <table>
                <thead>
                    <tr>
                        <th>Máquina</th>
                        <th>Capacidade Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Misturador</td>
                        <td id="capMisturadorTable">1200 horas</td>
                    </tr>
                    <tr>
                        <td>Reator</td>
                        <td id="capReatorTable">1000 horas</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function calcular() {
            // Obter valores dos produtos
            const lotesP1 = parseFloat(document.getElementById('lotesP1').value) || 0;
            const lotesP2 = parseFloat(document.getElementById('lotesP2').value) || 0;
            const lotesP3 = parseFloat(document.getElementById('lotesP3').value) || 0;
            
            const custoLoteP1 = parseFloat(document.getElementById('custoLoteP1').value) || 0;
            const custoLoteP2 = parseFloat(document.getElementById('custoLoteP2').value) || 0;
            const custoLoteP3 = parseFloat(document.getElementById('custoLoteP3').value) || 0;
            
            const demandaP1 = parseFloat(document.getElementById('demandaP1').value) || 0;
            const demandaP2 = parseFloat(document.getElementById('demandaP2').value) || 0;
            const demandaP3 = parseFloat(document.getElementById('demandaP3').value) || 0;
            
            // Calcular custos individuais
            const custoP1 = lotesP1 * custoLoteP1;
            const custoP2 = lotesP2 * custoLoteP2;
            const custoP3 = lotesP3 * custoLoteP3;
            
            // Atualizar custos individuais
            document.getElementById('custoP1').textContent = 'R$ ' + custoP1.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0});
            document.getElementById('custoP2').textContent = 'R$ ' + custoP2.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0});
            document.getElementById('custoP3').textContent = 'R$ ' + custoP3.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0});
            
            // Calcular custo total
            const custoTotal = custoP1 + custoP2 + custoP3;
            document.getElementById('custoTotal').textContent = 'R$ ' + custoTotal.toLocaleString('pt-BR', {minimumFractionDigits: 0, maximumFractionDigits: 0});
            
            // Calcular total de lotes
            const totalLotes = lotesP1 + lotesP2 + lotesP3;
            document.getElementById('totalLotes').textContent = totalLotes;
            document.getElementById('descLotes').textContent = lotesP1 + ' + ' + lotesP2 + ' + ' + lotesP3 + ' lotes';
            
            // Verificar status (atende demanda)
            const statusP1 = lotesP1 >= demandaP1 ? '✓ Atende demanda' : '✗ Abaixo da demanda';
            const statusP2 = lotesP2 >= demandaP2 ? '✓ Atende demanda' : '✗ Abaixo da demanda';
            const statusP3 = lotesP3 >= demandaP3 ? '✓ Atende demanda' : '✗ Abaixo da demanda';
            
            document.getElementById('statusP1').textContent = statusP1;
            document.getElementById('statusP1').style.color = lotesP1 >= demandaP1 ? '#4CAF50' : '#f44336';
            document.getElementById('statusP2').textContent = statusP2;
            document.getElementById('statusP2').style.color = lotesP2 >= demandaP2 ? '#4CAF50' : '#f44336';
            document.getElementById('statusP3').textContent = statusP3;
            document.getElementById('statusP3').style.color = lotesP3 >= demandaP3 ? '#4CAF50' : '#f44336';
            
            // Obter tempos de processamento
            const tempoMistP1 = parseFloat(document.getElementById('tempoMistP1').value) || 0;
            const tempoMistP2 = parseFloat(document.getElementById('tempoMistP2').value) || 0;
            const tempoMistP3 = parseFloat(document.getElementById('tempoMistP3').value) || 0;
            const tempoReatP1 = parseFloat(document.getElementById('tempoReatP1').value) || 0;
            const tempoReatP2 = parseFloat(document.getElementById('tempoReatP2').value) || 0;
            const tempoReatP3 = parseFloat(document.getElementById('tempoReatP3').value) || 0;
            
            // Calcular utilização das máquinas
            const usoMisturador = (tempoMistP1 * lotesP1) + (tempoMistP2 * lotesP2) + (tempoMistP3 * lotesP3);
            const usoReator = (tempoReatP1 * lotesP1) + (tempoReatP2 * lotesP2) + (tempoReatP3 * lotesP3);
            
            const capMisturador = parseFloat(document.getElementById('capMisturador').value) || 1;
            const capReator = parseFloat(document.getElementById('capReator').value) || 1;
            
            const percMisturador = capMisturador > 0 ? (usoMisturador / capMisturador * 100) : 0;
            const percReator = capReator > 0 ? (usoReator / capReator * 100) : 0;
            
            // Atualizar informações do Misturador
            document.getElementById('usoMisturador').textContent = usoMisturador.toFixed(0) + ' / ' + capMisturador + ' horas';
            document.getElementById('percMisturador').textContent = percMisturador.toFixed(2) + '%';
            document.getElementById('barraMisturador').style.width = Math.min(percMisturador, 100) + '%';
            document.getElementById('barraMisturador').textContent = percMisturador.toFixed(2) + '%';
            
            const restoMisturador = capMisturador - usoMisturador;
            if (restoMisturador < 0) {
                document.getElementById('restoMisturador').textContent = '⚠ Excedeu capacidade: ' + Math.abs(restoMisturador).toFixed(0) + ' horas';
                document.getElementById('restoMisturador').style.color = '#f44336';
            } else if (restoMisturador < capMisturador * 0.1) {
                document.getElementById('restoMisturador').textContent = '⚠ Capacidade quase esgotada: ' + restoMisturador.toFixed(0) + ' horas restantes';
                document.getElementById('restoMisturador').style.color = '#FF9800';
            } else {
                document.getElementById('restoMisturador').textContent = 'Capacidade restante: ' + restoMisturador.toFixed(0) + ' horas';
                document.getElementById('restoMisturador').style.color = '#666';
            }
            
            // Atualizar informações do Reator
            document.getElementById('usoReator').textContent = usoReator.toFixed(0) + ' / ' + capReator + ' horas';
            document.getElementById('percReator').textContent = percReator.toFixed(2) + '%';
            document.getElementById('barraReator').style.width = Math.min(percReator, 100) + '%';
            document.getElementById('barraReator').textContent = percReator.toFixed(2) + '%';
            
            const restoReator = capReator - usoReator;
            if (restoReator < 0) {
                document.getElementById('restoReator').textContent = '⚠ Excedeu capacidade: ' + Math.abs(restoReator).toFixed(0) + ' horas';
                document.getElementById('restoReator').style.color = '#f44336';
            } else if (restoReator < capReator * 0.1) {
                document.getElementById('restoReator').textContent = '⚠ Capacidade quase esgotada: ' + restoReator.toFixed(0) + ' horas restantes';
                document.getElementById('restoReator').style.color = '#FF9800';
            } else {
                document.getElementById('restoReator').textContent = 'Capacidade restante: ' + restoReator.toFixed(0) + ' horas';
                document.getElementById('restoReator').style.color = '#666';
            }
            
            // Atualizar tabela de capacidades
            document.getElementById('capMisturadorTable').textContent = capMisturador + ' horas';
            document.getElementById('capReatorTable').textContent = capReator + ' horas';
        }
        
        // Calcular ao carregar a página
        window.onload = calcular;
    </script>
</body>
</html>
